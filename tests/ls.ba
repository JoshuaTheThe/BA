
extern popen;
extern fgets;
extern printf;
extern malloc;
extern free;
static pipe;
static path;

path = malloc(128);
pipe = popen("r","ls");
if (pipe<1){
        printf("Could not grab listing\n");
        return 1;
}

while (fgets(pipe, 128, path))
        printf(path, "%s");

pclose(pipe);
free(path);
